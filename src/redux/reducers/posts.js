const data =  [
    {
        id: 1,
        alreadySeen: false,
        hasEdits: true,
        edits: [],
        hasFile: false,
        hasImage: false,
        hasTaggedPerson: false,
        hasURL: false,
        hasVideo: true,
        isCommentable: true,
        isReactable: true,
        isShared: false,
        isShareable: true,
        hasVocal: true,
        usersThatCanSee: [],
        originalPost: null,
        created_at: "2021-09-12T00:47:08.028Z",
        onlyFollowers: false,
        onlyFollowersAndFollowed: false,
        content: "Hello mamacita ! ka7la",
        multimedia: [
            {
                unique: null,
                type: "video",
                duration: 30.034,
                video_qualities: [
                    {
                        videoHash: "QmamDVEhFX7c8kbJEfmiNpP2Z1WcUHRgj2wAEfT6XH1SXF",
                        quality: "480p"
                    },
                    {
                        videoHash: "QmRuoSsmsoeLDQC5rggcRCF7CmgEqjcVYbHVjmiqPr43GQ",
                        quality: "240p"
                    },
                ]
            },
            {
                unique: "QmV55qseMjrj8HdFhx2qmJ6XSpUXwisjafJkGJyfhDG5Rw",
                type: "audio",
                duration: 33.529625,
                video_qualities: []
            },
            {
                type: "file",
                unique: "QmcTn242AzXMhEwSbHbJeUjH5u8pDocbEfGBjgopzVGmQD",
                doubtedContent: [],
                duration: null,
                video_qualities: [],
                name: "réponse.txt",
                size: 4560,
            },
            {
                type: "image",
                unique: "QmdsYC2xwcvmwXd6PNvQkMMKhj5xtMxnZjGLJvGqjv9yDU",
                doubtedContent: [],
                duration: null,
                video_qualities: []
            },
        ],
        privacyType: null,
        group: {
            groupName: "l fa9er wel far3na",
            groupPic: "https://www.signupgenius.com/cms/socialMediaImages/random-acts-kindness-youth-article-1200x800.jpg",
            unique: "p5dr3z8f9er2vjk6h2r5"
        },
        tagged_persons: [
            {
                tagged: {
                    username: "ka7la"
                },
                tagOffset: 3
            }
        ],
        tags: [],
        urls: [],
        owner: {
            username: "monstronix",
            profilePic: "https://images.unsplash.com/photo-1530268729831-4b0b9e170218?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTV8fHJhbmRvbSUyMHBlcnNvbnxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&w=1000&q=80",
            firstName: "Amin",
            lastName: "Salah",
            followed: true
        },
        place:"Joumhouriat Misr",
        activity: {
            name: "Playing",
            complimentary : "FIFA 22",
            thumbnail: "playing",//tavel, watch,
            with: ["dali_el_guerrero_del_punta_madra"],
            id: 5
        },
        react: {
            max: null,
            types: []
        },
        hasCommented: false,
        hasShared: true,
        viewCount: 0,
        commentsCount: 0,
    },
    {
        id: 2,
        alreadySeen: false,
        hasEdits: true,
        edits: [],
        hasFile: false,
        hasImage: false,
        hasTaggedPerson: false,
        hasURL: false,
        hasVideo: true,
        isCommentable: true,
        isReactable: true,
        isShared: false,
        isShareable: true,
        hasVocal: true,
        usersThatCanSee: [],
        originalPost: null,
        created_at: "2021-09-12T00:47:08.028Z",
        onlyFollowers: false,
        onlyFollowersAndFollowed: false,
        content: "Hello mamacita ! @dali @monstrnoix I have been planning on doing something great this weekend, you're all invited ! \n Me nd @dali are going to rock this shit out !!",
        multimedia: [
            {
                unique: null,
                type: "video",
                duration: 30.034,
                video_qualities: [
                    {
                        videoHash: "QmamDVEhFX7c8kbJEfmiNpP2Z1WcUHRgj2wAEfT6XH1SXF",
                        quality: "480p"
                    },
                    {
                        videoHash: "QmRuoSsmsoeLDQC5rggcRCF7CmgEqjcVYbHVjmiqPr43GQ",
                        quality: "240p"
                    },
                ]
            },
            {
                unique: "QmV55qseMjrj8HdFhx2qmJ6XSpUXwisjafJkGJyfhDG5Rw",
                type: "audio",
                duration: 33.529625,
                video_qualities: []
            },
            {
                type: "file",
                unique: "QmcTn242AzXMhEwSbHbJeUjH5u8pDocbEfGBjgopzVGmQD",
                doubtedContent: [],
                duration: null,
                video_qualities: [],
                name: "réponse.txt",
                size: 4560,
            },
            {
                type: "image",
                unique: "QmdsYC2xwcvmwXd6PNvQkMMKhj5xtMxnZjGLJvGqjv9yDU",
                doubtedContent: [],
                duration: null,
                video_qualities: []
            },
        ],
        privacyType: null,
        group: {
            groupName: "l fa9er wel far3na",
            groupPic: "https://www.signupgenius.com/cms/socialMediaImages/random-acts-kindness-youth-article-1200x800.jpg",
            unique: "p5dr3z8f9er2vjk6h2r5"
        },
        tagged_persons: ["monstrnoix","dali"],
        tags: [],
        urls: [],
        owner: {
            username: "moenstronix",
            profilePic: "https://images.unsplash.com/photo-1530268729831-4b0b9e170218?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTV8fHJhbmRvbSUyMHBlcnNvbnxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&w=1000&q=80",
            firstName: "Amin",
            lastName: "Salah",
            followed: true
        },
        place:"Joumhouriat Misr",
        activity: {
            name: "Fishing",
            thumbnail: "fishing",//tavel, watch,
            with: ["ali_dhahbi"],
            id: 5
        },
        react: {
            max: null,
            types: []
        },
        hasCommented: false,
        hasShared: true,
        viewCount: 0,
        commentsCount: 0
    }
]
export const posts =
(
    state={
        list: data
    },
    action
)=>{
    switch(action.type){
        case "POSTS_SET":
            return {
                ...state,
                list: action.data
            }

        case "POSTS_FOLLOW_OWNER":
            return {
                ...state,
                list: [
                    ...state.list.map(a=>({
                        owner:a.id === action.id ? {
                            ...a.owner,
                            followed: action.follow
                        } : a.owner,
                        ...a
                    }))
                ]
            }

        case "POSTS_EDIT":
            return {
                ...state,
                list: [
                    ...state.list.map(a=>({
                        edits: a.id === action.id ? [
                            {
                                text: action.text
                            },
                            ...a.edits
                        ] : a.edits,
                        hasEdits: true,
                        ...a
                    }))
                ]
            }
        
        case "POSTS_DELETE":
            return {
                ...state,
                list: [
                    ...state.list.filter(a=>a.id !== action.id)
                ]
            }

        
        case "POSTS_PRIVACY":
            return {
                ...state,
                list: [
                    ...state.list.map(a=>({
                        privacyType: a.id === action.id ? action.privacyType : a.privacyType,
                        onlyFollowers: a.id === action.id ? action.privacyType : a.onlyFollowers,
                        onlyFollowersAndFollowed: a.id === action.id ? action.privacyType : a.onlyFollowersAndFollowed,
                        usersThatCanSee: a.id === action.id ? action.usersThatCanSee : a.usersThatCanSee,
                        ...a
                    }))
                ]
            }

        case "POSTS_REACT":
            return {
                ...state,
                list: [
                    ...state.list.map(a=>({
                        react:{
                            ownReaction: action.emoji,
                            ...a.react
                        },
                        ...a
                    }))
                ]
            }

        case "POSTS_SHARE":
            return {
                ...state,
                list: [
                    ...state.list.map(a=>({
                        hasShared: a.id === action.id,
                        ...a
                    }))
                ]
            }

        case "POSTS_COMMENT":
            return {
                ...state,
                list: [
                    ...state.list.map(a=>({
                        commentsCount: a.id === action.id ? (action.type === "add" ? a.commentsCount+1 : a.commentsCount-1 ) : a.commentsCount,
                        hasCommented: a.id === action.id && action.type === "add" ? true : a.hasCommented,
                        ...a
                    }))
                ]
            }

        case "POSTS_OVERLAY":
            return {
                ...state,
                list: [
                    ...state.list.map(a=>({
                        ...a,
                        overlay: a.id === action.id ? (!action.hide ? action.overlay : undefined )  : undefined,
                    }))
                ]
            }
    
            
            

        default:
            return state
    }
}